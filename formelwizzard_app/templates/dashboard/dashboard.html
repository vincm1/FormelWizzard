{% extends "layout.html" %}{% block content %}
	<section class="home">
		<section class="dashboard">
			<div class="container-fluid pt-5 ps-5">
				{% if not current_user.premium %}
				<div class="banner col-xl-10 mb-5">
					<h3>{{current_user.num_prompts}} von 5 Anfragen verbraucht</h3>
					<button class="btn btn-primary premium-btn"><i class='bx bx-diamond icon'></i>Premium</button>
				</div>
				{% endif %}

				{% if current_user.premium or current_user.num_prompts < 5%}
				<div class="prompt mt-3">
					<div class="row align-items start">
						<form method="POST">
							{{form.hidden_tag()}}
							<div class="row mb-4">
								{{form.excel_google.label(id=("prompt-header"))}}
							</div>
							<div class="d-flex flex-row align-items-start">
								<div class="p-2 select" role="group">
									{{form.excel_google()}}
								</div>
								<div class="p-2 select" role="group">
									{{form.info_prompt()}}
								</div>
								<div class="p-2 select" role="group">
									{{form.formula_explain()}}
								</div>
							</div>
	
					<div class="row d-flex mt-5">
						<div class="col-xl-5 col-lg-4 col-md-3 prompt">
							<div class="row">
								{{form.prompt(class="form-control", placeholder="Schreibe mir eine Formel die zwei Zellen summiert z.B.")}}
							</div>
							<div class="row justify-content-end">
								{{form.submit(class="btn btn-primary mt-2 col-lg-5", id="formel-btn")}}
							</div>
							
						</form>
					</div>
					
					<div class="col-xl-5 col-lg-3 col-md-3 pl-5 formula">
						<div class="card">
					{% if form.formula_explain.data == "Erkl채ren" %}
							<div class="card-header">
							  Erkl채rung
							</div>
							<div class="card-body p-3">
								<div class="row">
									<p>{{explanation}}</p>
								</div>
								<div class="row d-flex justify-content-end">
					{% else %}
							<div class="card-header p-3">
							  Formel
							</div>
							<div class="card-body p-3">
								<div class="row">
									<p>{{formula}}</p>
								</div>
					{% endif %}
								<div class="row d-flex justify-content-end">
									<form method="POST" action="{{url_for('dashboard.add_favorite')}}">
										{{form_2.csrf_token}}
										{{form_2.provider(value=form.excel_google.data)}}
										{{form_2.favorite_type(value=form.info_prompt.data)}}
										{{form_2.method(value=form.formula_explain.data)}}
										{{form_2.command(value=form.prompt.data)}}
										{% if form.formula_explain.data == "Erkl채ren" %}
											{{form_2.prompt(value=explanation)}}
										{% else %}
											{{form_2.prompt(value=formula)}}
										{% endif %}
										<button class="p-2 btn btn-primary col-lg-1 me-2" type="submit" value="Form2" name="favorite-btn" id="favorite-btn">
											<i class="fa-regular fa-heart"></i>
										</button>
								</form>
								</div>
							</div>
						</div>
					</div>
				</div>
				{% else %}
				<div class="banner col-xl-10 mb-5">
					<h3>Keine Anfragen mehr 체brig</h3>
					<button class="btn btn-primary premium-btn"><i class='bx bx-diamond icon'></i>Premium</button>
				</div>
				{% endif %}
			</div>
			</div>
		</section>
	</section>
{% endblock %}