{% extends "layout.html" %}{% block content %}
<section class="home">
  <section class="templates ms-3">
    <div class="container-fluid mt-3">
      <div class="favorite-btns mb-2">
        <div class="row align-items-start">
          <form method="POST">
            <button class="btn btn-outline-primary" id="filter-btn" type="submit" name="filter_value" value="Alle">Alle</button>
            {% for category in categorys %}
				<button class="btn btn-outline-primary" id="filter-btn" type="submit" name="filter_value" value="{{category[0]}}">{{category[0]}}</button>
			{% endfor %}
			</form>
        </div>
      </div>
	  
	  	{% if not current_user.premium %}
			<div class="d-flex flex-row my-5 premium-banner">
				<div class="banner col-8 text-center me-4">
					<h3>Schalte als Premium Nutzer weitere Templates frei</h3>
				</div>
				<div class="banner col-xl-3 text-center mx-3" id="premium-div">
					<a href="{{url_for('dashboard.premium')}}">
						<button class="btn btn-primary" id="premium-btn">
							<i class='bx bx-diamond icon pe-3'></i>
							Premium
						</button>
					</a>
				</div>				
			</div>
		{% endif %}

	  <!-- Templates -->
      <div class="templates-cards mt-5">
          <div class="row">
			{% for template in templates %}
            <div class="col-xl-3 col-lg-3 col-md-3 mb-3 response">
              <div class="card w-30 h-70">
                <img
                  src="{{url_for('static', filename='img/spreadsheet-g1c355ce39_640.png' )}}"
                  class="card-img-top"
				  				alt="Spreadsheet picture"
                />
                <div class="card-body">
                  	<h5 class="card-title">{{template.template_name}}</h5>
				  			<h6 class="card-tag">{{template.template_category}}</h5>
                  	<p class="card-text">
                		{{template.template_description}}
					</p>
						<div class="row justify-content-center">
									{% set s3_template_link = "https://" + template.bucket + ".s3." + template.region + ".amazonaws.com/templates/" + template.template_name %}
									<a href="{{s3_template_link}}"
									class="btn btn-primary col-8">Download</a>
									</div>
                </div>
              </div>
            </div>
			{% endfor %}
          </div>
      </div>
	  
	  {% if current_user.premium %}
      <!-- Pagination Links-->
				<div class="pagination justify-content-end me-4">
					<div class="row pagination mt-3">
						<div class="text-right">
							<a href="{{ url_for('dashboard.templates', page=templates.prev_num) }}"
							class="btn btn-outline-primary 
							{% if templates.page == 1 %}disabled{% endif %}">
								&laquo;
							</a>
						<!-- Loop through the number of pages to display a link for each-->
							{% for page_num in templates.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
								{% if page_num %}
								<!-- Check for the active page and set the link to "Active"-->
									{% if templates.page == page_num %}
									<a href="{{ url_for('dashboard.templates', page=page_num) }}"
									class="btn btn-primary">
										{{ page_num }}
									</a>
									{% else %}
									<a href="{{ url_for('dashboard.templates', page=page_num) }}"
									class="btn btn-outline-primary">
										{{ page_num }}
									</a>
									{% endif %}
								{% else %}
									...
								{% endif %}
							{% endfor %}
							<a href="{{ url_for('dashboard.templates', page=templates.next_num) }}"
							class="btn btn-outline-primary
							{% if templates.page == templates.pages %}disabled{% endif %}">
								&raquo;
							</a>
						</div>
					</div>
				</div>
        {% endif %}
      </div>
    </div>
  </section>
</section>
{% endblock %}
